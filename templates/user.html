{% extends "layout.html" %}

{% block title %}
    User
{% endblock %}

{% block head %}

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0"></script>

{% endblock %}

{% block script %}
  <script>

  const ctx = document.getElementById('userChart');

  new Chart(ctx, {
    type: 'line',
    label: 'Points',
    data: {
      datasets: [{
        data: {{ database | safe }}
      }]
    },
    scales: {
      x: {
        type: 'time',
        time: {
          // Luxon format string
          tooltipFormat: 'DD T'
        },
        title: {
          display: true,
          text: 'Date'
        }
      },
      y: {
        title: {
          display: true,
          text: 'value'
        }
      }
    },
    options: {
      parsing: {
        xAxisKey: 'date',
        yAxisKey: 'score'
      }
    }
  });

  </script>
{% endblock %}

{% block main %}
	<form action="/user">
		<input type="text" id="q" name="q">
		<button type="submit">Lookup</button>
	</form>
	<hr>
	<div>
		<canvas id="userChart"></canvas>
	</div>
{% endblock %}